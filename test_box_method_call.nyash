// Box間メソッド呼び出しテスト

print("=== Box Method Call Test ===")

// 受信側Box
box Receiver {
    init { name }
    
    setName(n) {
        me.name = n
        print("Receiver name set to: " + n)
    }
    
    receive(message) {
        print("Receiver got message: " + message)
    }
}

// 送信側Box
box Sender {
    init { receiver }
    
    setReceiver(r) {
        me.receiver = r
        print("Sender connected to receiver")
    }
    
    send(message) {
        print("Sender about to send: " + message)
        me.receiver.receive(message)
        print("Sender finished sending")
    }
}

// テスト
print("Creating receiver...")
local receiver
receiver = new Receiver()
receiver.setName("TestReceiver")

print("Creating sender...")
local sender
sender = new Sender()
sender.setReceiver(receiver)

print("Sending message...")
sender.send("Hello World!")

print("Test completed!")
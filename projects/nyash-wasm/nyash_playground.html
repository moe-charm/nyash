<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ± Nyash Browser Playground</title>
    <style>
        body {
            font-family: 'Monaco', 'Consolas', monospace;
            margin: 20px;
            background: linear-gradient(135deg, #1e1e1e 0%, #2d2d2d 100%);
            color: #ffffff;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            color: #ff6b6b;
            text-align: center;
            margin-bottom: 5px;
            text-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
        }
        .subtitle {
            text-align: center;
            color: #4ecdc4;
            margin-bottom: 30px;
            font-size: 18px;
            font-weight: bold;
        }
        .philosophy {
            text-align: center;
            color: #888;
            margin-bottom: 30px;
            font-style: italic;
            background: rgba(78, 205, 196, 0.1);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid rgba(78, 205, 196, 0.3);
        }
        
        .demo-selector {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .demo-btn {
            background: linear-gradient(45deg, #ff6b6b, #ffa726);
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
        }
        
        .demo-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
        }
        
        .demo-btn.active {
            background: linear-gradient(45deg, #4caf50, #66bb6a);
        }
        
        
        .editor-container {
            display: flex;
            gap: 20px;
            height: 75vh;
        }
        .left-panel, .right-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        label {
            color: #4ecdc4;
            margin-bottom: 10px;
            font-weight: bold;
        }
        #editor {
            flex: 1;
            background: #2d2d2d;
            color: #f8f8f2;
            border: 2px solid #4ecdc4;
            border-radius: 8px;
            padding: 15px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 14px;
            resize: none;
            outline: none;
        }
        #output {
            background: #000;
            color: #00ff00;
            border: 2px solid #666;
            border-radius: 8px;
            padding: 15px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 14px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-break: break-all;
            height: 180px;
        }
        
        .right-panel-content {
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        .controls {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            justify-content: center;
        }
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        button:active {
            transform: translateY(0);
        }
        .examples {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        .example-btn {
            background: #444;
            color: #ccc;
            font-size: 12px;
            padding: 8px 16px;
        }
        .example-btn:hover {
            background: #555;
        }
        .loading {
            text-align: center;
            color: #4ecdc4;
            margin: 20px 0;
        }
        .error {
            color: #ff6b6b;
            background: #2d1b1b;
            border: 1px solid #ff6b6b;
            border-radius: 4px;
            padding: 10px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ± Nyash Browser Playground</h1>
        <p class="subtitle">Everything is Box in your browser! - Rust WASM powered</p>
        
        <div class="philosophy">
            <strong>ğŸ¯ Everything is Boxå“²å­¦:</strong> Nyashã§ã¯ã€ã™ã¹ã¦ã®å€¤ãƒ»é–¢æ•°ãƒ»ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¾ã§ãŒBoxã§ã™ã€‚
            ã“ã‚Œã«ã‚ˆã‚Šçµ±ä¸€çš„ã§ç¾ã—ãã€ãƒ¡ãƒ¢ãƒªå®‰å…¨ãªä¸–ç•Œã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚
        </div>
        
        <div class="loading" id="loading">
            ğŸš€ Loading Nyash WebAssembly module...
        </div>
        
        <div id="playground" style="display: none;">
            <div class="editor-container">
                <div class="left-panel">
                    <label for="editor">ğŸ“ Nyash Code:</label>
                    <textarea id="editor" placeholder="// Nyashã‚³ãƒ¼ãƒ‰ã‚’ã“ã“ã«æ›¸ãã«ã‚ƒï¼
// ğŸ¯ æ­£çµ±æ´¾Nyashã‚¹ã‚¿ã‚¤ãƒ« - static box Main!

static box Main {
    init { console, x, y, result }
    
    main() {
        me.console = new WebConsoleBox(\"output\")
        me.console.log(\"ğŸ‰ Hello from Nyash!\")
        
        me.x = 42
        me.y = 58
        me.result = me.x + me.y
        me.console.log(\"x + y = \" + me.result)
        
        return \"Success!\"
    }
}"></textarea>
                </div>
                
                <div class="right-panel">
                    <div class="right-panel-content">
                        <!-- ãƒ­ã‚°å‡ºåŠ›ã‚¨ãƒªã‚¢ï¼ˆå›ºå®šï¼‰ -->
                        <div style="margin-bottom: 20px;">
                            <label for="output" style="color: #4ecdc4; font-weight: bold;">ğŸ“º Output:</label>
                            <div id="output"></div>
                        </div>
                        
                        <!-- Canvas ã‚¨ãƒªã‚¢ -->
                        <div style="flex: 1;">
                            <label for="game-canvas" style="color: #4ecdc4; font-weight: bold; margin-bottom: 10px; display: block;">ğŸ¨ Canvas:</label>
                            <canvas id="game-canvas" width="400" height="250" style="border: 2px solid #4ecdc4; border-radius: 8px; background: black; display: block;"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="controls">
                <button onclick="runNyash()">ğŸš€ å®Ÿè¡Œï¼</button>
                <button onclick="clearOutput()">ğŸ§¹ ã‚¯ãƒªã‚¢</button>
                <button onclick="showVersion()">ğŸ“‹ Version</button>
                <button onclick="showHelp()">â“ ãƒ˜ãƒ«ãƒ—</button>
            </div>
            
            <div class="examples">
                <button class="example-btn" onclick="loadExample('hello')">Hello World</button>
                <button class="example-btn" onclick="loadExample('math')">æ•°å­¦è¨ˆç®—</button>
                <button class="example-btn" onclick="loadExample('async')">âš¡ è¨ˆç®—å‡¦ç†</button>
                <button class="example-btn" onclick="loadExample('artists')">ğŸ¨ å”åŒåˆ¶ä½œ</button>
                <button class="example-btn" onclick="loadExample('debug')">ãƒ‡ãƒãƒƒã‚°</button>
                <button class="example-btn" onclick="loadExample('webdisplay')">ğŸŒ WebDisplay</button>
                <button class="example-btn" onclick="loadExample('webcanvas')">ğŸ¨ WebCanvas</button>
                <button class="example-btn" onclick="loadExample('canvas_advanced')">ğŸ¨ Canvasé«˜åº¦</button>
                <button class="example-btn" onclick="loadExample('operators')">æ¼”ç®—å­ãƒ†ã‚¹ãƒˆ</button>
            </div>
        </div>
    </div>
    
    <script type="module">
        import init, { NyashWasm } from './pkg/nyash_rust.js';
        
        let nyash;
        
        async function initializeNyash() {
            try {
                // Initialize WASM module
                await init();
                
                // Create Nyash interpreter instance
                nyash = new NyashWasm();
                
                // Show playground and hide loading
                document.getElementById('loading').style.display = 'none';
                document.getElementById('playground').style.display = 'block';
                
                // Show version info in output
                const output = document.getElementById('output');
                output.textContent = 'ğŸ‰ Nyash WASM initialized successfully!\\n' + 
                                   nyash.version() + '\\n\\n' +
                                   'Ready to execute Nyash code...\\n';
                
            } catch (error) {
                document.getElementById('loading').innerHTML = 
                    '<div class="error">âŒ Failed to load Nyash WASM: ' + error.message + '</div>';
            }
        }
        
        // Global functions for buttons
        window.runNyash = function() {
            if (!nyash) {
                alert('Nyash is not loaded yet!');
                return;
            }
            
            const code = document.getElementById('editor').value;
            const output = document.getElementById('output');
            
            // Webå‡ºåŠ›Boxã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
            const usesWebOutputBox = code.includes('WebDisplayBox') || code.includes('WebConsoleBox') || code.includes('WebCanvasBox');
            
            try {
                const result = nyash.eval(code);
                
                if (usesWebOutputBox) {
                    // Webå‡ºåŠ›BoxãŒåˆ¶å¾¡ã™ã‚‹ã®ã§ã€JavaScriptã¯ä½•ã‚‚ã—ãªã„
                    console.log('Web output box is controlling the output panel');
                } else {
                    // Webå‡ºåŠ›Boxã‚’ä½¿ã‚ãªã„å ´åˆã¯ã€é€šå¸¸é€šã‚ŠJavaScriptã§å‡ºåŠ›
                    output.textContent += '> ' + result + '\\n';
                    output.scrollTop = output.scrollHeight;
                }
            } catch (error) {
                output.textContent += 'âŒ Error: ' + error.message + '\\n';
                output.scrollTop = output.scrollHeight;
            }
        };
        
        window.clearOutput = function() {
            document.getElementById('output').textContent = '';
        };
        
        window.showVersion = function() {
            if (nyash) {
                const output = document.getElementById('output');
                output.textContent += 'ğŸ“‹ ' + nyash.version() + '\\n';
                output.textContent += 'ğŸ¯ Static Box Mainãƒ‘ã‚¿ãƒ¼ãƒ³: âœ… å®Ÿè£…æ¸ˆã¿\\n';
                output.textContent += 'ğŸ”’ å¤‰æ•°å®£è¨€å³å¯†æ€§: âœ… æœ‰åŠ¹\\n';
                output.textContent += 'âš¡ æ¼”ç®—å­(AND/OR/NOT/é™¤ç®—): âœ… å¯¾å¿œæ¸ˆã¿\\n';
                output.textContent += 'ğŸŒ WebCanvasBox + WebConsoleBox: âœ… åˆ©ç”¨å¯èƒ½\\n\\n';
                output.scrollTop = output.scrollHeight;
            }
        };
        
        window.showHelp = function() {
            const output = document.getElementById('output');
            output.textContent += `ğŸ“š Nyash ã‚¯ã‚¤ãƒƒã‚¯ãƒ˜ãƒ«ãƒ—:

ğŸ¯ æ­£çµ±æ´¾Nyashã‚¹ã‚¿ã‚¤ãƒ«:
static box Main {
    init { field1, field2 }  // ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å®£è¨€
    
    main() {
        me.field1 = "å€¤"      // me.fieldã§å‚ç…§
        local temp           // localå¤‰æ•°å®£è¨€
        temp = 42
        return "æˆåŠŸï¼"
    }
}

âš¡ åˆ©ç”¨å¯èƒ½æ¼”ç®—å­:
- ç®—è¡“: +, -, *, /
- æ¯”è¼ƒ: ==, !=, <, >, <=, >=  
- è«–ç†: not, and, or

ğŸ¨ ç‰¹æ®ŠBox:
- WebConsoleBox("output") - HTMLå‡ºåŠ›
- WebCanvasBox("game-canvas", w, h) - ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯
- DebugBox() - ãƒ¡ãƒ¢ãƒªè¿½è·¡

ğŸ’¡ Tips:
- ã™ã¹ã¦ã®å¤‰æ•°ã¯å®£è¨€å¿…é ˆ (init {} ã¾ãŸã¯ local)
- ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚¢ã‚¯ã‚»ã‚¹ã¯ me.field
- Everything is Box - main()ã§ã•ãˆã‚‚ï¼

`;
            output.scrollTop = output.scrollHeight;
        };
        
        window.loadExample = function(type) {
            const editor = document.getElementById('editor');
            
            const examples = {
                hello: `// ğŸ± Hello World Example (æ­£çµ±æ´¾Nyashã‚¹ã‚¿ã‚¤ãƒ«)
static box Main {
    init { console }
    
    main() {
        me.console = new WebConsoleBox("output")
        me.console.log("ğŸ‰ Hello from æ­£çµ±æ´¾ Nyash!")
        me.console.log("Everything is Box philosophy!")
        me.console.log("ğŸŠ Static box Mainãƒ‘ã‚¿ãƒ¼ãƒ³å‹•ä½œä¸­ï¼")
        return "Hello Worldå®Œäº†ï¼"
    }
}`,

                math: `// ğŸ§® Math Example (æ­£çµ±æ´¾Nyashã‚¹ã‚¿ã‚¤ãƒ«)
static box Main {
    init { console, a, b }
    
    main() {
        me.console = new WebConsoleBox("output")
        me.console.group("ğŸ”¢ æ•°å­¦æ¼”ç®—ãƒ†ã‚¹ãƒˆ")
        
        me.a = 10
        me.b = 5
        me.console.info("å€¤: a = " + me.a + ", b = " + me.b)
        me.console.log("åŠ ç®—: a + b = " + (me.a + me.b))
        me.console.log("æ¸›ç®—: a - b = " + (me.a - me.b))
        me.console.log("ä¹—ç®—: a * b = " + (me.a * me.b))
        me.console.log("é™¤ç®—: a / b = " + (me.a / me.b))
        
        me.console.separator()
        me.console.info("ğŸ” è«–ç†æ¼”ç®—:")
        me.console.log("a > b: " + (me.a > me.b))
        me.console.log("not (a < b): " + not (me.a < me.b))
        me.console.log("a > 8 and b < 8: " + (me.a > 8 and me.b < 8))
        
        me.console.groupEnd()
        return "æ•°å­¦æ¼”ç®—å®Œäº†ï¼"
    }
}`,

                debug: `// ğŸ” Debug Example (æ­£çµ±æ´¾Nyashã‚¹ã‚¿ã‚¤ãƒ«)
static box Main {
    init { console, debug, x, memoryInfo }
    
    main() {
        me.console = new WebConsoleBox("output")
        me.debug = new DebugBox()
        
        me.console.group("ğŸ” ãƒ‡ãƒãƒƒã‚°ã‚»ãƒƒã‚·ãƒ§ãƒ³")
        me.debug.startTracking()
        me.console.log("ğŸš€ ãƒ‡ãƒãƒƒã‚°è¿½è·¡é–‹å§‹ï¼")
        
        me.x = 100
        me.debug.trackBox(me.x, "é‡è¦ãªå€¤")
        me.console.info("è¿½è·¡ä¸­: x = " + me.x)
        
        me.console.separator()
        me.memoryInfo = me.debug.memoryReport()
        me.console.debug("ğŸ’¾ ãƒ¡ãƒ¢ãƒªãƒ¬ãƒãƒ¼ãƒˆ:")
        me.console.log(me.memoryInfo)
        
        me.console.groupEnd()
        return "ãƒ‡ãƒãƒƒã‚°å®Œäº†ï¼"
    }
}`,

                webdisplay: `// ğŸŒ WebDisplayBox Example (æ­£çµ±æ´¾Nyashã‚¹ã‚¿ã‚¤ãƒ«)
static box Main {
    init { display }
    
    main() {
        me.display = new WebDisplayBox("output")
        
        me.display.clear()
        me.display.setHTML("<h2>ğŸŒŸ WebDisplayBox ãƒ‡ãƒ¢</h2>")
        
        me.display.setCSS("color", "lime")
        me.display.appendHTML("<p><strong>ç·‘è‰²ã®ãƒ†ã‚­ã‚¹ãƒˆ</strong> - ç›´æ¥HTMLåˆ¶å¾¡ï¼</p>")
        
        me.display.setCSS("color", "cyan")
        me.display.appendHTML("<p><em>ã‚·ã‚¢ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°</em> - CSSæ“ä½œï¼</p>")
        
        me.display.setCSS("color", "white")
        me.display.appendHTML("<h3>ğŸ¨ æ©Ÿèƒ½:</h3>")
        me.display.appendHTML("<ul>")
        me.display.appendHTML("<li>ç›´æ¥HTMLå‡ºåŠ›</li>")
        me.display.appendHTML("<li>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ CSSåˆ¶å¾¡</li>")
        me.display.appendHTML("<li>ãƒªãƒƒãƒã‚³ãƒ³ãƒ†ãƒ³ãƒ„æç”»</li>")
        me.display.appendHTML("</ul>")
        
        me.display.appendHTML("<p><strong>ğŸŒ Everything is Box ãŒãƒ–ãƒ©ã‚¦ã‚¶ã§ï¼</strong></p>")
        
        return "WebDisplay ãƒ‡ãƒ¢å®Œäº†ï¼"
    }
}`,

                webcanvas: `// ğŸ¨ WebCanvasBox Basic Example (æ­£çµ±æ´¾Nyashã‚¹ã‚¿ã‚¤ãƒ«)
static box Main {
    init { canvas, console }
    
    main() {
        me.canvas = new WebCanvasBox("game-canvas", 400, 250)
        me.console = new WebConsoleBox("output")
        
        me.console.group("ğŸ¨ Canvasæç”»ãƒ‡ãƒ¢")
        me.console.log("Canvasä½œæˆ: 400x250")
        
        // èƒŒæ™¯ã‚’ã‚¯ãƒªã‚¢ã—ã¦æç”»
        me.canvas.clear()
        me.canvas.fillRect(0, 0, 400, 250, "black")
        
        // åŸºæœ¬å›³å½¢
        me.canvas.fillRect(30, 30, 60, 50, "red")
        me.canvas.strokeRect(120, 30, 60, 50, "blue", 3)
        me.canvas.fillCircle(250, 60, 25, "green")
        me.canvas.strokeCircle(330, 60, 25, "yellow", 4)
        
        me.console.log("åŸºæœ¬å›³å½¢æç”»å®Œäº†ï¼")
        
        // ç·šã¨ãƒ†ã‚­ã‚¹ãƒˆ
        me.canvas.drawLine(50, 120, 350, 120, "white", 2)
        me.canvas.fillText("Hello Canvas!", 80, 160, "20px Arial", "magenta")
        me.canvas.fillText("Nyash WebCanvas!", 100, 200, "16px Arial", "cyan")
        
        me.console.log("ç·šã¨ãƒ†ã‚­ã‚¹ãƒˆè¿½åŠ å®Œäº†ï¼")
        me.console.groupEnd()
        return "Canvasæç”»å®Œäº†ï¼"
    }
}`,

                canvas_advanced: `// ğŸ¨ WebCanvasBox Advanced Example (æ­£çµ±æ´¾Nyashã‚¹ã‚¿ã‚¤ãƒ«)
static box Main {
    init { canvas, console, cellSize, x, y, i, j }
    
    main() {
        me.canvas = new WebCanvasBox("game-canvas", 400, 250)
        me.console = new WebConsoleBox("output")
        
        me.console.group("ğŸ® é«˜åº¦ãªCanvas ãƒ‡ãƒ¢")
        
        // ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
        me.canvas.clear()
        me.canvas.fillRect(0, 0, 400, 250, "navy")
        
        me.console.log("ğŸ¨ ã‚«ãƒ©ãƒ•ãƒ«ãªãƒ‘ã‚¿ãƒ¼ãƒ³æç”»ä¸­...")
        
        // è™¹è‰²ã®ã‚°ãƒªãƒƒãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³
        me.cellSize = 12
        me.i = 0
        loop(me.i < 10) {
            me.j = 0
            loop(me.j < 8) {
                me.x = 30 + me.i * me.cellSize
                me.y = 50 + me.j * me.cellSize
                
                // è‰²ã‚’è¨ˆç®— (rainbowåŠ¹æœ)
                if me.i + me.j == 0 {
                    me.canvas.fillRect(me.x, me.y, me.cellSize - 2, me.cellSize - 2, "red")
                }
                if me.i + me.j == 2 {
                    me.canvas.fillRect(me.x, me.y, me.cellSize - 2, me.cellSize - 2, "orange")
                }
                if me.i + me.j == 4 {
                    me.canvas.fillRect(me.x, me.y, me.cellSize - 2, me.cellSize - 2, "yellow")
                }
                if me.i + me.j == 6 {
                    me.canvas.fillRect(me.x, me.y, me.cellSize - 2, me.cellSize - 2, "lime")
                }
                if me.i + me.j == 8 {
                    me.canvas.fillRect(me.x, me.y, me.cellSize - 2, me.cellSize - 2, "cyan")
                }
                if me.i + me.j == 10 {
                    me.canvas.fillRect(me.x, me.y, me.cellSize - 2, me.cellSize - 2, "blue")
                }
                if me.i + me.j == 12 {
                    me.canvas.fillRect(me.x, me.y, me.cellSize - 2, me.cellSize - 2, "magenta")
                }
                
                me.j = me.j + 1
            }
            me.i = me.i + 1
        }
        
        me.console.log("ğŸŒˆ è™¹è‰²ã‚°ãƒªãƒƒãƒ‰å®Œæˆï¼")
        
        // ã‚²ãƒ¼ãƒ è¦ç´  - ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¨ã‚¨ãƒãƒŸãƒ¼
        me.canvas.fillCircle(80, 200, 15, "gold")
        me.canvas.strokeCircle(80, 200, 15, "orange", 3)
        me.canvas.fillText("Player", 60, 235, "12px Arial", "white")
        
        me.canvas.fillRect(200, 185, 30, 30, "red")
        me.canvas.strokeRect(200, 185, 30, 30, "darkred", 2)
        me.canvas.fillText("Enemy", 195, 235, "12px Arial", "white")
        
        me.canvas.fillCircle(320, 200, 12, "lime")
        me.canvas.fillText("Goal", 300, 235, "12px Arial", "white")
        
        // ãƒ‘ãƒ¯ãƒ¼ã‚¢ãƒƒãƒ—ã‚¢ã‚¤ãƒ†ãƒ 
        me.i = 0
        loop(me.i < 3) {
            me.x = 250 + me.i * 30
            me.canvas.fillCircle(me.x, 100, 8, "hotpink")
            me.canvas.strokeCircle(me.x, 100, 8, "purple", 2)
            me.i = me.i + 1
        }
        me.canvas.fillText("Power-ups", 230, 125, "10px Arial", "white")
        
        // ã‚¿ã‚¤ãƒˆãƒ«ã¨UI
        me.canvas.fillText("ğŸ® Nyash Game World", 20, 25, "16px Arial", "white")
        me.canvas.fillText("Everything is Interactive!", 20, 45, "12px Arial", "cyan")
        
        me.console.log("ğŸ® ã‚²ãƒ¼ãƒ è¦ç´ é…ç½®å®Œäº†ï¼")
        me.console.info("ğŸ¯ ã‚²ãƒ¼ãƒ é–‹ç™ºæº–å‚™å®Œäº†ï¼")
        me.console.groupEnd()
        return "é«˜åº¦ãªCanvaså®Œäº†ï¼"
    }
}`,

                operators: `// âš¡ Operators Example (æ­£çµ±æ´¾Nyashã‚¹ã‚¿ã‚¤ãƒ«)
static box Main {
    init { console, isActive, x, y, canAccess }
    
    main() {
        me.console = new WebConsoleBox("output")
        me.console.group("âš¡ å…¨æ¼”ç®—å­ãƒ‡ãƒ¢")
        
        me.isActive = true
        me.x = 10
        me.y = 20
        
        me.console.info("ğŸ“Š ãƒ†ã‚¹ãƒˆå€¤: x=" + me.x + ", y=" + me.y + ", flag=" + me.isActive)
        me.console.separator()
        
        // NOTæ¼”ç®—å­
        me.console.info("âŒ NOTæ¼”ç®—å­:")
        me.console.log("not isActive = " + not me.isActive)
        
        me.console.separator()
        
        // AND/ORæ¼”ç®—å­
        me.console.info("ğŸ”— AND/ORæ¼”ç®—å­:")
        me.console.log("x > 5 and y < 30 = " + (me.x > 5 and me.y < 30))
        me.console.log("x > 15 or y > 15 = " + (me.x > 15 or me.y > 15))
        
        me.console.separator()
        
        // è¤‡åˆæ¡ä»¶
        me.canAccess = (me.x > 5 and me.y > 10) or not me.isActive
        me.console.info("ğŸ¯ è¤‡åˆæ¡ä»¶:")
        me.console.log("(x > 5 and y > 10) or not isActive = " + me.canAccess)
        
        me.console.groupEnd()
        return "å…¨æ¼”ç®—å­ãƒ†ã‚¹ãƒˆå®Œäº†ï¼"
    }
}`,

                async: `// âš¡ è¨ˆç®—å‡¦ç†ãƒ‡ãƒ¢ (WASMç‰ˆ - åŒæœŸå‡¦ç†)
static box Main {
    init { console }
    
    main() {
        me.console = new WebConsoleBox("output")
        me.console.group("âš¡ è¨ˆç®—å‡¦ç†ãƒ‡ãƒ¢")
        
        me.console.log("ğŸš€ é‡ã„è¨ˆç®—å‡¦ç†é–‹å§‹...")
        me.console.log("ğŸ’¡ æ³¨æ„: WASMç‰ˆã§ã¯åŒæœŸå‡¦ç†ã§å®Ÿè¡Œã•ã‚Œã¾ã™")
        
        // ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°å®£è¨€
        local result1, result2, total
        
        // è¨ˆç®—å‡¦ç†å®Ÿè¡Œ
        me.console.separator()
        me.console.log("ğŸ“Š è¨ˆç®—1å®Ÿè¡Œä¸­ (3000å›)...")
        result1 = heavyComputation(3000)
        
        me.console.log("ğŸ“Š è¨ˆç®—2å®Ÿè¡Œä¸­ (2000å›)...")
        result2 = heavyComputation(2000)
        
        me.console.separator()
        me.console.info("ğŸ‰ è¨ˆç®—çµæœ:")
        me.console.log("çµæœ1 (3000å›): " + result1)
        me.console.log("çµæœ2 (2000å›): " + result2)
        
        total = result1 + result2
        me.console.log("åˆè¨ˆçµæœ: " + total)
        me.console.log("âœ¨ è¨ˆç®—å‡¦ç†å®Œäº†ï¼")
        
        me.console.separator()
        me.console.debug("ğŸ’¡ éåŒæœŸç‰ˆã¯ãƒ­ãƒ¼ã‚«ãƒ«ç‰ˆã§è©¦ã—ã¦ãã ã•ã„:")
        me.console.debug("   ./target/debug/nyash test_async_demo.nyash")
        
        me.console.groupEnd()
        return "è¨ˆç®—ãƒ‡ãƒ¢æˆåŠŸï¼"
    }
}

// é‡ã„è¨ˆç®—å‡¦ç†ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
function heavyComputation(iterations) {
    local result, i
    result = 0
    i = 0
    
    loop(i < iterations) {
        result = result + i * i
        i = i + 1
    }
    
    return result
}`,

                artists: `// ğŸ¨ ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆå”åŒåˆ¶ä½œ - è¤‡æ•°Boxã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ç‰ˆ
static box Main {
    init { console, canvas, artist1, artist2, artist3 }
    
    main() {
        me.console = new WebConsoleBox("output")
        me.console.group("ğŸ¨ ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆå”åŒåˆ¶ä½œ")
        
        // Canvasæº–å‚™
        me.canvas = new WebCanvasBox("game-canvas", 400, 250)
        me.canvas.clear()
        me.canvas.fillRect(0, 0, 400, 250, "lightgray")
        
        // ã‚¨ãƒªã‚¢å¢ƒç•Œç·š
        me.canvas.fillRect(133, 0, 2, 250, "gray")
        me.canvas.fillRect(267, 0, 2, 250, "gray")
        me.console.log("ğŸ–¼ï¸ ã‚­ãƒ£ãƒ³ãƒã‚¹æº–å‚™å®Œäº†")
        
        // 3äººã®ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã‚’é›‡ç”¨
        me.artist1 = new Artist("æŠ½è±¡ç”»å®¶ãƒ”ã‚«ã‚½", "red")
        me.artist2 = new Artist("å¹¾ä½•å­¦è€…ã‚¬ã‚¦ã‚¹", "blue") 
        me.artist3 = new Artist("è‡ªç„¶æ´¾ãƒ¢ãƒ", "green")
        
        me.console.info("ğŸ‘©â€ğŸ¨ ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆç™»å ´:")
        me.console.log("â€¢ " + me.artist1.name + " (" + me.artist1.color + ")")
        me.console.log("â€¢ " + me.artist2.name + " (" + me.artist2.color + ")")
        me.console.log("â€¢ " + me.artist3.name + " (" + me.artist3.color + ")")
        
        me.console.separator()
        me.console.log("ğŸ¨ å„ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆãŒå‰µä½œé–‹å§‹...")
        
        // å„ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆãŒç‹¬è‡ªã‚¨ãƒªã‚¢ã§ä½œå“åˆ¶ä½œï¼ˆã‚·ãƒ³ãƒ—ãƒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰
        me.artist1.paintInArea(me.canvas, 10, 20, 113, 210)
        me.artist2.paintInArea(me.canvas, 143, 20, 114, 210)  
        me.artist3.paintInArea(me.canvas, 277, 20, 113, 210)
        
        // ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆåè¡¨ç¤º
        me.canvas.fillRect(20, 5, 90, 12, "white")
        me.canvas.fillRect(150, 5, 90, 12, "white")
        me.canvas.fillRect(285, 5, 90, 12, "white")
        
        me.console.separator()
        me.console.info("ğŸ‰ å”åŒã‚¢ãƒ¼ãƒˆä½œå“å®Œæˆï¼")
        me.console.log("3ã¤ã®ç•°ãªã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ã§è¡¨ç¾ã•ã‚Œã¾ã—ãŸ")
        me.console.groupEnd()
        
        return "ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆå”åŒåˆ¶ä½œæˆåŠŸï¼"
    }
}

box Artist {
    init { name, color }
    
    Artist(n, c) {
        me.name = n
        me.color = c
    }
    
    paintInArea(canvas, x, y, width, height) {
        // ã‚·ãƒ³ãƒ—ãƒ«ãªæç”»ï¼ˆãƒã‚¹ãƒˆãƒ«ãƒ¼ãƒ—å›é¿ï¼‰
        canvas.fillRect(x + 10, y + 10, 30, 30, me.color)
        canvas.fillRect(x + 50, y + 30, 25, 25, me.color)
        canvas.fillRect(x + 20, y + 70, 40, 20, me.color)
        canvas.fillRect(x + 70, y + 60, 20, 35, me.color)
        canvas.fillRect(x + 30, y + 110, 35, 15, me.color)
        canvas.fillRect(x + 15, y + 140, 50, 25, me.color)
        canvas.fillRect(x + 75, y + 120, 25, 40, me.color)
    }
}`
            };
            
            if (examples[type]) {
                editor.value = examples[type];
            }
        };
        
        // Initialize when page loads
        initializeNyash();
    </script>
</body>
</html>
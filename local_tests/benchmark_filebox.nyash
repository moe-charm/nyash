// FileBox ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯
// é™çš„ç‰ˆã¨å‹•çš„ç‰ˆã®é€Ÿåº¦æ¯”è¼ƒ

static box Main {
    init { console, timer }
    
    main() {
        me.console = new ConsoleBox()
        me.timer = new TimeBox()
        
        me.console.log("ğŸ“Š FileBox ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯é–‹å§‹")
        
        // ãƒ†ã‚¹ãƒˆè¨­å®š
        local iterations
        iterations = 1000
        local testFile
        testFile = "benchmark_test.txt"
        
        // ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯1: ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆãƒ»å‰Šé™¤
        me.console.log("\nğŸ”§ Test 1: FileBoxä½œæˆ x " + iterations.toString())
        local start1
        start1 = me.timer.now()
        
        local i
        i = 0
        loop(i < iterations) {
            local file
            file = new FileBox(testFile + i.toString())
            i = i + 1
        }
        
        local elapsed1
        elapsed1 = me.timer.elapsed(start1)
        me.console.log("â±ï¸ çµŒéæ™‚é–“: " + elapsed1.toString() + "ms")
        me.console.log("ğŸ“ˆ å¹³å‡: " + (elapsed1 / iterations).toString() + "ms/æ“ä½œ")
        
        // ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯2: èª­ã¿æ›¸ãæ“ä½œ
        me.console.log("\nğŸ”§ Test 2: èª­ã¿æ›¸ãæ“ä½œ x " + iterations.toString())
        local file2
        file2 = new FileBox(testFile)
        
        local start2
        start2 = me.timer.now()
        
        i = 0
        loop(i < iterations) {
            file2.write("Test data " + i.toString())
            local content
            content = file2.read()
            i = i + 1
        }
        
        local elapsed2
        elapsed2 = me.timer.elapsed(start2)
        me.console.log("â±ï¸ çµŒéæ™‚é–“: " + elapsed2.toString() + "ms")
        me.console.log("ğŸ“ˆ å¹³å‡: " + (elapsed2 / iterations).toString() + "ms/æ“ä½œ")
        
        // ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯3: exists()ãƒã‚§ãƒƒã‚¯
        me.console.log("\nğŸ”§ Test 3: exists()ãƒã‚§ãƒƒã‚¯ x " + iterations.toString())
        local start3
        start3 = me.timer.now()
        
        i = 0
        loop(i < iterations) {
            local exists
            exists = file2.exists()
            i = i + 1
        }
        
        local elapsed3
        elapsed3 = me.timer.elapsed(start3)
        me.console.log("â±ï¸ çµŒéæ™‚é–“: " + elapsed3.toString() + "ms")
        me.console.log("ğŸ“ˆ å¹³å‡: " + (elapsed3 / iterations).toString() + "ms/æ“ä½œ")
        
        // ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
        i = 0
        loop(i < iterations) {
            local fileName
            fileName = testFile + i.toString()
            // ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤ï¼ˆæ‰‹å‹•ã§è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼‰
            i = i + 1
        }
        
        me.console.log("\nâœ… ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å®Œäº†ï¼")
        return "done"
    }
}
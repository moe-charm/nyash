# ğŸ” ä»–ã®Boxå‹•ä½œç¢ºèª - SocketBoxã¨ã®æ¯”è¼ƒåˆ†æ
# æ­£å¸¸ã«å‹•ä½œã™ã‚‹Boxã®çŠ¶æ…‹ä¿æŒã‚’æ¤œè¨¼

static box Main {
    init { console, result }
    
    main() {
        me.console = new ConsoleBox()
        me.console.log("ğŸ” ä»–ã®Boxå‹•ä½œç¢ºèªãƒ†ã‚¹ãƒˆé–‹å§‹")
        
        # ===== MapBoxçŠ¶æ…‹ãƒ†ã‚¹ãƒˆ =====
        me.console.log("=== MapBoxçŠ¶æ…‹ãƒ†ã‚¹ãƒˆ ===")
        local testMap = new MapBox()
        me.console.log("MapBoxä½œæˆ: " + testMap.toString())
        
        testMap.set("key1", "value1")
        local getValue = testMap.get("key1")
        me.console.log("MapBox set/get: " + getValue.toString())
        
        # ===== ArrayBoxçŠ¶æ…‹ãƒ†ã‚¹ãƒˆ =====
        me.console.log("=== ArrayBoxçŠ¶æ…‹ãƒ†ã‚¹ãƒˆ ===")
        local testArray = new ArrayBox()
        me.console.log("ArrayBoxä½œæˆ: " + testArray.toString())
        
        testArray.push("item1")
        local arraySize = testArray.size()
        me.console.log("ArrayBox push/size: " + arraySize.toString())
        
        # ===== MathBoxçŠ¶æ…‹ãƒ†ã‚¹ãƒˆ =====
        me.console.log("=== MathBoxçŠ¶æ…‹ãƒ†ã‚¹ãƒˆ ===")
        local testMath = new MathBox()
        me.console.log("MathBoxä½œæˆ: " + testMath.toString())
        
        local mathResult = testMath.add(5, 3)
        me.console.log("MathBox add: " + mathResult.toString())
        
        # ===== SocketBoxçŠ¶æ…‹ãƒ†ã‚¹ãƒˆï¼ˆå•é¡Œç®‡æ‰€ï¼‰ =====
        me.console.log("=== SocketBoxçŠ¶æ…‹ãƒ†ã‚¹ãƒˆï¼ˆå•é¡Œç®‡æ‰€ï¼‰ ===")
        local testSocket = new SocketBox()
        me.console.log("SocketBoxä½œæˆ: " + testSocket.toString())
        
        local beforeBind = testSocket.isServer()
        me.console.log("Before bind: isServer = " + beforeBind.toString())
        
        local bindResult = testSocket.bind("127.0.0.1", 18080)
        me.console.log("Bind result = " + bindResult.toString())
        
        local afterBind = testSocket.isServer()
        me.console.log("After bind: isServer = " + afterBind.toString())
        
        testSocket.close()
        
        # ===== çµæœåˆ¤å®š =====
        if afterBind.equals(true) {
            me.result = "SocketBoxæ­£å¸¸å‹•ä½œ"
        } else {
            me.result = "SocketBoxçŠ¶æ…‹ä¿æŒå¤±æ•— - ä»–ã®Boxã¯æ­£å¸¸"
        }
        
        me.console.log("ğŸ¯ ãƒ†ã‚¹ãƒˆçµæœ: " + me.result)
        return me.result
    }
}
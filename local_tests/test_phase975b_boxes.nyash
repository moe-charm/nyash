// Phase 9.75-Bä¿®æ­£ãƒ†ã‚¹ãƒˆ - RwLockå¤‰æ›å¾Œã®å„Boxå‹•ä½œç¢ºèª
// ArrayBoxã€MapBoxã€BufferBoxã€StreamBoxã€DebugBoxãƒ†ã‚¹ãƒˆ

static box Main {
    init { console, result }
    
    main() {
        me.console = new ConsoleBox()
        me.console.log("ğŸ§ª Phase 9.75-B Boxå‹ãƒ†ã‚¹ãƒˆé–‹å§‹")
        
        // ArrayBox RwLockå¤‰æ›ãƒ†ã‚¹ãƒˆ
        me.console.log("\nğŸ“¦ ArrayBox RwLock ãƒ†ã‚¹ãƒˆ")
        local array
        array = new ArrayBox()
        array.push("test1")
        array.push("test2")
        local arrayLen
        arrayLen = array.length()
        me.console.log("ArrayBox length: " + arrayLen.toString())
        
        local firstItem
        firstItem = array.get(0)
        me.console.log("ArrayBox first item: " + firstItem.toString())
        
        // MapBox RwLockå¤‰æ›ãƒ†ã‚¹ãƒˆ
        me.console.log("\nğŸ—ºï¸ MapBox RwLock ãƒ†ã‚¹ãƒˆ")
        local map
        map = new MapBox()
        map.set("key1", "value1")
        map.set("key2", "value2")
        
        local value1
        value1 = map.get("key1")
        me.console.log("MapBox get key1: " + value1.toString())
        
        local mapSize
        mapSize = map.size()
        me.console.log("MapBox size: " + mapSize.toString())
        
        // BufferBox RwLockå¤‰æ›ãƒ†ã‚¹ãƒˆ
        me.console.log("\nğŸ“„ BufferBox RwLock ãƒ†ã‚¹ãƒˆ")
        local buffer
        buffer = new BufferBox()
        buffer.write("Hello")
        buffer.write(" ")
        buffer.write("World")
        
        local bufferContent
        bufferContent = buffer.toString()
        me.console.log("BufferBox content: " + bufferContent)
        
        local bufferSize
        bufferSize = buffer.size()
        me.console.log("BufferBox size: " + bufferSize.toString())
        
        // StreamBox RwLockå¤‰æ›ãƒ†ã‚¹ãƒˆ
        me.console.log("\nğŸŒŠ StreamBox RwLock ãƒ†ã‚¹ãƒˆ")
        local stream
        stream = new StreamBox()
        stream.write("Stream data")
        
        local streamContent
        streamContent = stream.read()
        me.console.log("StreamBox read: " + streamContent.toString())
        
        // DebugBox RwLockå¤‰æ›ãƒ†ã‚¹ãƒˆ
        me.console.log("\nğŸ› DebugBox RwLock ãƒ†ã‚¹ãƒˆ")
        local debug
        debug = new DebugBox()
        debug.startTracking()
        debug.trackBox(array, "test array")
        
        local memoryReport
        memoryReport = debug.memoryReport()
        me.console.log("DebugBox tracking: " + memoryReport.toString())
        
        me.console.log("\nâœ… Phase 9.75-B ã™ã¹ã¦ã®Boxå‹ãƒ†ã‚¹ãƒˆå®Œäº†")
        me.result = "SUCCESS: RwLockå¤‰æ›å¾Œã®Boxå‹å‹•ä½œæ­£å¸¸"
        
        return me.result
    }
}
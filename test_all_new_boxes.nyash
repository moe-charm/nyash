// ğŸ§ª æ–°ã—ã„Boxã‚¿ã‚¤ãƒ—ã®çµ±åˆãƒ†ã‚¹ãƒˆ
// Arc<Mutex>ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèª

print("=== New Boxes Integration Test ===")

// ğŸ“¦ ArrayBox Test
print("\nğŸ”¹ ArrayBox Test:")
local arr
arr = new ArrayBox()
arr.push("Hello")
arr.push("World") 
arr.push(42)
print("Array length: " + arr.length())
print("Array contents: " + arr.toString())

// ğŸ—„ï¸ MapBox Test  
print("\nğŸ”¹ MapBox Test:")
local map
map = new MapBox()
map.set("name", "Alice")
map.set("age", 25)
map.set("active", true)
print("Map size: " + map.size())
print("Name: " + map.get("name"))
print("Age: " + map.get("age"))
print("Has email: " + map.has("email"))

// ğŸ“Š BufferBox Test
print("\nğŸ”¹ BufferBox Test:")
local buffer
buffer = new BufferBox()
local data_array
data_array = new ArrayBox()
data_array.push(72)  // H
data_array.push(101) // e
data_array.push(108) // l
data_array.push(108) // l
data_array.push(111) // o
buffer.write(data_array)
print("Buffer size: " + buffer.length())

// ğŸ” RegexBox Test  
print("\nğŸ”¹ RegexBox Test:")
local regex
regex = new RegexBox("[0-9]+")
print("Regex pattern: " + regex.pattern())
print("Test '123': " + regex.test("123"))
print("Test 'abc': " + regex.test("abc"))

// âœ… ResultBox Test
print("\nğŸ”¹ ResultBox Test:")
local ok_result, err_result
ok_result = new ResultBox()
ok_result = ResultBox.ok("Success!")
print("OK result: " + ok_result.toString())
print("Is OK: " + ok_result.is_ok())

print("\nğŸ‰ All Arc<Mutex> pattern tests completed successfully!")
// Text Adventure Game - Items Module
// ã‚¢ã‚¤ãƒ†ãƒ ã‚·ã‚¹ãƒ†ãƒ ã®åŸºæœ¬å®Ÿè£…

// åŸºæœ¬ã‚¢ã‚¤ãƒ†ãƒ Box
box Item {
    init { name, description, weight, value }
    
    Item(name, description, weight, value) {
        me.name = name
        me.description = description
        me.weight = weight
        me.value = value
    }
    
    // ã‚¢ã‚¤ãƒ†ãƒ ã®è¡¨ç¤º
    display() {
        return me.name + " - " + me.description
    }
    
    // Getter for field access bug workaround
    getName() {
        return me.name
    }
    
    // è©³ç´°æƒ…å ±è¡¨ç¤º
    examine() {
        return me.description + " (Weight: " + me.weight + ", Value: " + me.value + ")"
    }
    
    // æŒã¡ä¸Šã’å¯èƒ½ã‹ãƒã‚§ãƒƒã‚¯
    canPickUp() {
        return me.weight <= 10
    }
    
    // ä¾¡å€¤ãŒã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
    isValuable() {
        return me.value > 50
    }
}

// æ­¦å™¨ã‚¢ã‚¤ãƒ†ãƒ ï¼ˆç¶™æ‰¿ãªã—ã€å…¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ç‹¬ç«‹ï¼‰
box Weapon {
    init { name, description, weight, value, damage, durability }
    
    Weapon(name, description, weight, value, damage, durability) {
        me.name = name
        me.description = description
        me.weight = weight
        me.value = value
        me.damage = damage
        me.durability = durability
    }
    
    display() {
        return me.name + " (DMG: " + me.damage + ")"
    }
    
    getName() {
        return me.name
    }
    
    examine() {
        return me.description + " - Damage: " + me.damage + ", Durability: " + me.durability + "/" + me.durability
    }
    
    canPickUp() {
        return me.weight <= 15  // æ­¦å™¨ã¯å°‘ã—é‡ãã¦ã‚‚OK
    }
    
    // æ­¦å™¨ã®ä½¿ç”¨
    use() {
        if me.durability > 0 {
            me.durability = me.durability - 1
            return me.damage
        } else {
            return 0  // å£Šã‚ŒãŸæ­¦å™¨
        }
    }
    
    isBroken() {
        return me.durability <= 0
    }
    
    // Weaponã«ã‚‚å¿…è¦ãªãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
    isValuable() {
        return me.value > 50
    }
}

// æ¶ˆè²»ã‚¢ã‚¤ãƒ†ãƒ ï¼ˆç¶™æ‰¿ãªã—ã€å…¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ç‹¬ç«‹ï¼‰
box Consumable {
    init { name, description, weight, value, effect, uses }
    
    Consumable(name, description, weight, value, effect, uses) {
        me.name = name
        me.description = description
        me.weight = weight
        me.value = value
        me.effect = effect
        me.uses = uses
    }
    
    display() {
        return me.name + " (" + me.uses + " uses)"
    }
    
    getName() {
        return me.name
    }
    
    examine() {
        return me.description + " - Effect: " + me.effect + ", Uses remaining: " + me.uses
    }
    
    canPickUp() {
        return true  // æ¶ˆè²»ã‚¢ã‚¤ãƒ†ãƒ ã¯è»½ã„
    }
    
    // ã‚¢ã‚¤ãƒ†ãƒ ã®ä½¿ç”¨
    use() {
        if me.uses > 0 {
            me.uses = me.uses - 1
            return me.effect
        } else {
            return 0  // ä½¿ã„åˆ‡ã£ãŸ
        }
    }
    
    isEmpty() {
        return me.uses <= 0
    }
    
    // Consumableã«ã‚‚å¿…è¦ãªãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
    isValuable() {
        return me.value > 25
    }
}

// éµã‚¢ã‚¤ãƒ†ãƒ ï¼ˆç‰¹åˆ¥ãªã‚¢ã‚¤ãƒ†ãƒ ï¼‰
box Key {
    init { name, description, targetDoor, weight, value }
    
    Key(name, description, targetDoor) {
        me.name = name
        me.description = description
        me.targetDoor = targetDoor
        me.weight = 1  // éµã¯è»½ã„
        me.value = 10  // éµã¯å®‰ã„
    }
    
    display() {
        return me.name + " (Key)"
    }
    
    getName() {
        return me.name
    }
    
    examine() {
        return me.description + " - Opens: " + me.targetDoor
    }
    
    canPickUp() {
        return true  // éµã¯å¿…ãšæ‹¾ãˆã‚‹
    }
    
    // æ‰‰ã‚’é–‹ã‘ã‚‹ã‹ç¢ºèª
    opensDoor(doorName) {
        return me.targetDoor == doorName
    }
    
    // Keyã«ã‚‚å¿…è¦ãªãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
    isValuable() {
        return me.value > 50  // éµã¯ç‰¹åˆ¥ä¾¡å€¤ãŒé«˜ã„å ´åˆã®ã¿
    }
}

// ã‚¢ã‚¤ãƒ†ãƒ ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼ï¼ˆä¾¿åˆ©é–¢æ•°ï¼‰
function createSword() {
    return new Weapon("Iron Sword", "A sharp iron blade", 8, 100, 15, 50)
}

function createPotion() {
    return new Consumable("Health Potion", "Restores health", 1, 25, 50, 1)
}

function createKey(doorName) {
    return new Key("Old Key", "An ancient rusty key", doorName)
}

function createTreasure() {
    return new Item("Golden Coin", "A shiny gold piece", 1, 100)
}

print("ğŸ“¦ Items module loaded successfully!")
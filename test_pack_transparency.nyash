# ğŸ”¥ Phase 8.8: packé€æ˜åŒ–ã‚·ã‚¹ãƒ†ãƒ  ãƒ†ã‚¹ãƒˆ
# ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯`pack`ã‚’ä¸€åˆ‡æ„è­˜ã›ãšã€`from BuiltinBox()`ã§è‡ªå‹•å‹•ä½œ

print("=== packé€æ˜åŒ–ã‚·ã‚¹ãƒ†ãƒ  ãƒ†ã‚¹ãƒˆé–‹å§‹ ===")

# ãƒ†ã‚¹ãƒˆA: ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©BoxåŸºæœ¬å‹•ä½œ (birthå„ªå…ˆ)
box Life {
    init { name, energy }
    
    birth(lifeName) {
        me.name = lifeName
        me.energy = 100
    }
    
    introduce() {
        return "ç§ã®åå‰ã¯ " + me.name + " ã§ã™ã€‚"
    }
}

local alice = new Life("Alice")
print("A. " + alice.introduce())

# ãƒ†ã‚¹ãƒˆB: ãƒ“ãƒ«ãƒˆã‚¤ãƒ³Boxç¶™æ‰¿ï¼ˆæ˜ç¤ºçš„packä½¿ç”¨ï¼‰
box EnhancedString from StringBox {
    init { prefix }
    
    pack(content) {
        from StringBox.pack(content)  # æ˜ç¤ºçš„pack
        me.prefix = ">>> "
    }
    
    override toString() {
        return me.prefix + from StringBox.toString()
    }
}

local enhanced = new EnhancedString("Hello")
print("B. " + enhanced.toString())

# ãƒ†ã‚¹ãƒˆC: é€æ˜åŒ–ã‚·ã‚¹ãƒ†ãƒ å‹•ä½œ - æœ€é‡è¦ãƒ†ã‚¹ãƒˆ
box SimpleString from StringBox {
    init { prefix }
    
    birth(content, prefixStr) {
        from StringBox(content)  # â† é€æ˜åŒ–ï¼å†…éƒ¨çš„ã«packå‘¼ã³å‡ºã—
        me.prefix = prefixStr
    }
    
    override toString() {
        return me.prefix + from StringBox.toString()
    }
}

local simple = new SimpleString("World", "<<< ")
print("C. " + simple.toString())

print("=== packé€æ˜åŒ–ã‚·ã‚¹ãƒ†ãƒ  ãƒ†ã‚¹ãƒˆå®Œäº† ===")
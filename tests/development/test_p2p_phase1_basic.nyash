// ğŸ§ª P2PBox Phase 1: åŸºæœ¬ãƒ†ã‚¹ãƒˆ
// ç›®æ¨™: IntentBoxä½œæˆãƒ»P2PBoxåŸºæœ¬å‹•ä½œãƒ»MessageBusç¢ºèª

local console
console = new ConsoleBox()
console.log("ğŸš€ Phase 1: P2PBoxåŸºæœ¬ãƒ†ã‚¹ãƒˆé–‹å§‹")

// 1.1 IntentBoxåŸºæœ¬ãƒ†ã‚¹ãƒˆ
console.log("\nğŸ“¦ 1.1 IntentBoxåŸºæœ¬ãƒ†ã‚¹ãƒˆ")

local intent
intent = new IntentBox("test", "Hello")
console.log("âœ… IntentBoxä½œæˆæˆåŠŸ")
console.log("Intentå: " + intent.getName())         // "test"
console.log("Payload: " + intent.getPayload())       // "Hello"

// ç•°ãªã‚‹ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ã§ã®ãƒ†ã‚¹ãƒˆ
local msgIntent
msgIntent = new IntentBox("message", "Hello P2P World!")
console.log("âœ… ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸IntentBoxä½œæˆæˆåŠŸ")
console.log("Intentå: " + msgIntent.getName())      // "message"
console.log("Payload: " + msgIntent.getPayload())    // "Hello P2P World!"

// 1.2 P2PBoxä½œæˆãƒ†ã‚¹ãƒˆ
console.log("\nğŸŒ 1.2 P2PBoxä½œæˆãƒ†ã‚¹ãƒˆ")

local node
node = new P2PBox("test_node", "inprocess")
console.log("âœ… P2PBoxä½œæˆæˆåŠŸ")
console.log("ãƒãƒ¼ãƒ‰ID: " + node.getNodeId())       // "test_node"

// è¤‡æ•°ãƒãƒ¼ãƒ‰ä½œæˆãƒ†ã‚¹ãƒˆ
local alice
local bob
alice = new P2PBox("alice", "inprocess")
bob = new P2PBox("bob", "inprocess")
console.log("âœ… è¤‡æ•°P2PBoxä½œæˆæˆåŠŸ")
console.log("Alice ID: " + alice.getNodeId())      // "alice"
console.log("Bob ID: " + bob.getNodeId())          // "bob"

// 1.3 MessageBusåŸºæœ¬å‹•ä½œãƒ†ã‚¹ãƒˆ
console.log("\nğŸšŒ 1.3 MessageBusåŸºæœ¬å‹•ä½œãƒ†ã‚¹ãƒˆ")

// Note: MessageBusã¯ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³ãªã®ã§ç›´æ¥ãƒ†ã‚¹ãƒˆã¯é›£ã—ã„ãŒã€
// P2PBoxãŒæ­£å¸¸ã«ä½œæˆã§ãã¦ã„ã‚‹ã“ã¨ã§MessageBusã‚‚å‹•ä½œã—ã¦ã„ã‚‹ã¨åˆ¤æ–­
console.log("âœ… MessageBuså‹•ä½œç¢ºèªï¼ˆP2PBoxä½œæˆæˆåŠŸã«ã‚ˆã‚Šé–“æ¥ç¢ºèªï¼‰")

// åŸºæœ¬çµ±è¨ˆ
console.log("\nğŸ“Š Phase 1ãƒ†ã‚¹ãƒˆçµæœçµ±è¨ˆ")
console.log("ä½œæˆã•ã‚ŒãŸIntentBoxæ•°: 2")
console.log("ä½œæˆã•ã‚ŒãŸP2PBoxæ•°: 3")
console.log("ãƒ†ã‚¹ãƒˆã•ã‚ŒãŸæ©Ÿèƒ½: IntentBoxä½œæˆã€P2PBoxä½œæˆã€ãƒãƒ¼ãƒ‰IDå–å¾—")

console.log("\nğŸ‰ Phase 1: åŸºæœ¬ãƒ†ã‚¹ãƒˆå®Œäº†ï¼")
console.log("æ¬¡ã¯Phase 2: P2Pé€šä¿¡ãƒ†ã‚¹ãƒˆã«é€²ã¿ã¾ã™")
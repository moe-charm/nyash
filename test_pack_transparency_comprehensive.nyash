# ğŸ”¥ Phase 8.8: packé€æ˜åŒ–ã‚·ã‚¹ãƒ†ãƒ  åŒ…æ‹¬ãƒ†ã‚¹ãƒˆ
# å…¨ãƒ“ãƒ«ãƒˆã‚¤ãƒ³Boxç¶™æ‰¿ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ mixed inheritance ã®ãƒ†ã‚¹ãƒˆ

print("=== packé€æ˜åŒ–ã‚·ã‚¹ãƒ†ãƒ åŒ…æ‹¬ãƒ†ã‚¹ãƒˆé–‹å§‹ ===")

# ãƒ†ã‚¹ãƒˆ1: IntegerBox é€æ˜åŒ–
box SmartInteger from IntegerBox {
    init { isPositive }
    
    birth(value) {
        from IntegerBox(value)  # é€æ˜åŒ–ã‚·ã‚¹ãƒ†ãƒ 
        me.isPositive = value > 0
    }
    
    getInfo() {
        if me.isPositive {
            return "æ­£æ•°ã§ã™"
        } else {
            return "è² æ•°ã¾ãŸã¯0ã§ã™"
        }
    }
}

local num1 = new SmartInteger(42)
print("1. " + num1.getInfo())

local num2 = new SmartInteger(-5)  
print("2. " + num2.getInfo())

# ãƒ†ã‚¹ãƒˆ2: æ··åœ¨ãƒ†ã‚¹ãƒˆ - ãƒ“ãƒ«ãƒˆã‚¤ãƒ³ç¶™æ‰¿ + ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©
box AdvancedCalc from MathBox {
    init { history }
    
    birth() {
        from MathBox()  # é€æ˜åŒ–ã‚·ã‚¹ãƒ†ãƒ 
        me.history = new ArrayBox()
    }
    
    addToHistory(operation) {
        me.history.push(operation)
        return "å±¥æ­´ã«è¿½åŠ : " + operation
    }
}

box SimpleCalculator {
    init { result }
    
    birth() {
        me.result = 0
    }
    
    getResult() {
        return "çµæœ: " + me.result
    }
}

local calc1 = new AdvancedCalc()     # ãƒ“ãƒ«ãƒˆã‚¤ãƒ³ç¶™æ‰¿
local calc2 = new SimpleCalculator() # ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©

print("3. " + calc1.addToHistory("2+2=4"))
print("4. " + calc2.getResult())

print("=== packé€æ˜åŒ–ã‚·ã‚¹ãƒ†ãƒ åŒ…æ‹¬ãƒ†ã‚¹ãƒˆå®Œäº† ===")